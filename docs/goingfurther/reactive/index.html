<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.45" />
    <meta name="description" content="An introduction to Shiny, for the Research Software Engineering conference 2018">
<meta name="author" content="David Mawdsley">

    <link rel="shortcut icon" href="../../images/favicon.png" type="image/x-icon" />
<link rel="icon" href="../../images/favicon.png" type="image/x-icon" />
    <title>Reactive data :: Introduction to Shiny</title>
    
    
    <link href="../../css/nucleus.css?1532611356" rel="stylesheet">
    <link href="../../css/font-awesome.min.css?1532611356" rel="stylesheet">
    <link href="../../css/hybrid.css?1532611356" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1532611356" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1532611356" rel="stylesheet">
    <link href="../../css/auto-complete.css?1532611356" rel="stylesheet">
    <link href="../../css/theme.css?1532611356" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1532611356" rel="stylesheet">
    

    <script src="../../js/jquery-2.x.min.js?1532611356"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/goingfurther/reactive/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img src='http://assets.manchester.ac.uk/logos/hi-res/TAB_UNI_MAIN_logo/White_backgrounds/TAB_col_white_background.png'>

    </div>
    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/basics/" title="Getting started" class="dd-item 
        
        
        
        ">
      <a href="../../basics/">
          <b>1. </b>Getting started
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ui/" title="User Interface design" class="dd-item 
        
        
        
        ">
      <a href="../../ui/">
          <b>2. </b>User Interface design
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/plotting/" title="Producing plots" class="dd-item 
        
        
        
        ">
      <a href="../../plotting/">
          <b>3. </b>Producing plots
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/together/" title="Putting it all together" class="dd-item 
        
        
        
        ">
      <a href="../../together/">
          <b>4. </b>Putting it all together
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/deploy/" title="Deploying Shiny apps" class="dd-item 
        
        
        
        ">
      <a href="../../deploy/">
          <b>5. </b>Deploying Shiny apps
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/goingfurther/" title="Going further" class="dd-item 
        parent
        
        
        ">
      <a href="../../goingfurther/">
          <b>6. </b>Going further
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/goingfurther/reactive/" title="Reactive data" class="dd-item active">
        <a href="../../goingfurther/reactive/">
        Reactive data
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="../../about/">About</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/uomresearchit/RSE18-shiny-workshop/">GitHub</a>
              </li>
          
              <li> 
                  <a class="padding" href="../../">Home</a>
              </li>
          
              <li> 
                  <a class="padding" href="../../slides/">Slides</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://twitter.com/davemawdsley">Twitter</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../'>Introduction to Shiny</a> > <a href='../../goingfurther/'>Going further</a> > Reactive data
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#exercise">Exercise</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Reactive data</h1>
          

        




<p>In this example we only use the filtered gapminder data in a single place - to plot the graph.   For this reason we did the filtering within the <code>renderPlot()</code> function.</p>

<p>Let&rsquo;s add another output to the app; we&rsquo;ll show which country is the richest displayed on the graph, and what its GDP per capita is. This means that we&rsquo;ll be using the gapminder data filtered by year and country in two places; on the graph itself and in the logic where we work out what the richest country is.</p>

<p>To do this, we&rsquo;ll make the a reactive expression, which contains the data we want to plot.  A rective expression is an expression whose value can change during the running of the app.   As mentioned previously, the reactive programming approach means that Shiny will keep track of when reactive expressions have become invalid (for example, if their inputs have changed - in this example if <code>year</code> or <code>continent</code> change), and will then recalculate them automatically.</p>

<p>Schematically, we have:</p>

<div class="mermaid" align="left">
graph LR;
   A[input$year] --> B[plotData]
   B --> C[output$gapminderPlot]
   D[input$continent] --> B
</div>


<p>Let&rsquo;s make the plotted data a reactive expression. We add the following code to the <code>server()</code> function:</p>

<pre><code class="language-r">   # The data we wish to plot
   plotData &lt;- reactive({
     gapminder %&gt;% 
       filter(year == input$year) %&gt;% 
       filter(continent %in% input$continent)
   })
</code></pre>

<p>Reactive expressions return a function, so we refer to the data we&rsquo;re plotting as <code>plotData()</code>.  We can use this in our <code>renderPlot()</code> function:</p>

<pre><code class="language-r">   output$gapminderPlot &lt;- renderPlot({
      plotData() %&gt;% 
         produceGapminderPlot() })
</code></pre>

<p>The app will behave in the same way as before, but by definining the reactive expression <code>plotData()</code> we can use the data that we&rsquo;re plotting on the graph elsewhere in the app.</p>

<h2 id="exercise">Exercise</h2>

<p>The <code>renderTable()</code> function will render a tibble, and <code>tableOutput()</code> will display it.   Use these functions, with the reactive data to display a (long) table containing the data displayed on the graph.</p>

<p>The <code>getRichestCountry()</code> function in <code>plottingFunctions.R</code> will return a tibble containing the name of the richest country in a tibble, and the country&rsquo;s GDP per capita. Modify your <code>renderTable()</code> function to only display this information for the displayed graph.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="../../goingfurther/" title="Going further"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="../../basics/" title="Getting started" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1532611356"></script>
    <script src="../../js/perfect-scrollbar.min.js?1532611356"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1532611356"></script>
    <script src="../../js/jquery.sticky.js?1532611356"></script>
    <script src="../../js/featherlight.min.js?1532611356"></script>
    <script src="../../js/html5shiv-printshiv.min.js?1532611356"></script>
    <script src="../../js/highlight.pack.js?1532611356"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/modernizr.custom.71422.js?1532611356"></script>
    <script src="../../js/learn.js?1532611356"></script>
    <script src="../../js/hugo-learn.js?1532611356"></script>

    <link href="../../mermaid/mermaid.css?1532611356" type="text/css" rel="stylesheet" />
    <script src="../../mermaid/mermaid.js?1532611356"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

